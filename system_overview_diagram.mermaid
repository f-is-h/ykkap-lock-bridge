graph TD
    U((ユーザー)) -->|操作| A[iPhone\n#40;HomeKit#41;]
    A -->|指示| C{Home Assistant}
    C -->|設定| D[MQTTロック定義]
    C <-->|データ交換| E{MQTTサーバー}
    F[Dockerコンテナ] <-->|サブスクライブ/パブリッシュ| E
    F -->|ADBコマンド| G[Androidスマホ]
    G -->|Bluetooth制御| H((YKK AP\n電気錠))
    I[ドア/窓センサー] -.->|オプション| C
    I -.->|状態検知| H